import {clpp} from "./cl.core.js";let g={};const _ = clpp._;var f=function(window){'use strict';var Wy=function(a,b){return 0<=b&&b<a.a.length},Xy=function(a){a.trigger(new _.E(_.ff))},Yy=class extends _.ft{on(a,b,c){return super.on(a,b,c)}one(a,b,c){return super.one(a,b,c)}off(a,b){return super.off(a,b)}constructor(a,b){b=void 0===b?()=>Promise.resolve():b;super();this.m=a;this.l=b;this.f=0;this.a=[];this.h=!1;this.j=this.Wa.bind(this)}getPosition(){return this.f}Eg(){return this.a}Sc(){return 0<this.a.length&&Wy(this,this.f)?this.a[this.f]:null}Fg(){const a=this.f+1;return 0<
this.a.length&&Wy(this,a)?this.a[a]:null}Qg(){return this.h}start(){this.h||(this.h=!0,this.m.on(_.Vd,this.j),this.yd(this.f,!0))}stop(){this.h=!1;this.m.off(_.Vd,this.j)}Wa(){this.next()}next(){const a=this;return _.x(function*(){yield a.yd(Math.min(a.a.length-1,a.f+1))})}hh(){const a=this;return _.x(function*(){yield a.yd(Math.max(0,a.f-1))})}yd(a,b){b=void 0===b?!1:b;const c=this;return _.x(function*(){if(0<c.a.length&&Wy(c,a)&&(b||c.f!==a)){c.f=a;var d=c.Sc();d&&(yield c.l(d),yield c.m.load(d.configuration),
c.trigger(new _.E(_.ef,{item:d})))}})}append(a){this.a.push(a);Xy(this)}Og(a,b){if(0<=b&&b<=this.a.length){const c=this.Sc();this.a.splice(b,0,a);c&&(this.f=this.a.indexOf(c));Xy(this)}}remove(a){if(0<this.a.length&&Wy(this,a)){if(this.f===a)throw Error("Can't remove the current item");this.a.splice(a,1);Xy(this)}}clear(){this.stop();this.f=0;this.a=[];this.h=!1;Xy(this)}};_.z("clpp.Playlist",Yy);Yy.prototype.clear=Yy.prototype.clear;Yy.prototype.remove=Yy.prototype.remove;Yy.prototype.insert=Yy.prototype.Og;
Yy.prototype.append=Yy.prototype.append;Yy.prototype.goTo=Yy.prototype.yd;Yy.prototype.previous=Yy.prototype.hh;Yy.prototype.next=Yy.prototype.next;Yy.prototype.onEnded=Yy.prototype.Wa;Yy.prototype.stop=Yy.prototype.stop;Yy.prototype.start=Yy.prototype.start;Yy.prototype.isStarted=Yy.prototype.Qg;Yy.prototype.getUpcoming=Yy.prototype.Fg;Yy.prototype.getCurrent=Yy.prototype.Sc;Yy.prototype.getQueue=Yy.prototype.Eg;Yy.prototype.getPosition=Yy.prototype.getPosition;Yy.prototype.off=Yy.prototype.off;
Yy.prototype.one=Yy.prototype.one;Yy.prototype.on=Yy.prototype.on;};f.call(g, window);