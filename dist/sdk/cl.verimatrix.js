import {clpp} from "./cl.core.js";let g={};const _ = clpp._;var f=function(window){'use strict';var Fv="VerimatrixVCAS",Gv="clpp.verimatrix.Vcas",Hv="clpp.verimatrix.VcasComponent",Jv=function(a,b){return a.C===Iv?(a=Object.assign({},{deviceId:_.Di(_.ui(a.A))},a.a&&{authenticator:_.Di(_.ui(a.a))}),b+_.kj(a)):b},Pv=class extends _.kt{constructor(a){super(Fv);const b={};b[Kv]=Kv;b[Lv]=Lv;const {deviceId:c,authenticator:d,licenseRequestVuidLocation:e=Iv,httpHeaderNames:f=b,widevineLicenseUrl:g,playReadyLicenseUrl:h,fairPlayLicenseUrl:k,fairPlayCertificateUrl:l,fairPlaySiteId:m,fairPlayAssetIdStrategy:n=
Mv}=a;this.A=c;this.a=d;this.C=e;this.B=f;this.w=Jv(this,g);this.o=Jv(this,h);this.l=Jv(this,k);this.j=l;this.G=m;this.F=n;this.g=new _.R(Gv);_.yi(this.w)?this.g.warn(_.Xb):this.Ta(_.zd,{licenseUrl:this.w,videoRobustness:[_.Gb,void 0],audioRobustness:[_.Fb,void 0],persistentStateRequired:!1,distinctiveIdentifierRequired:!1,serverCertificate:null,modifiers:{licenseRequest:this.h.bind(this)}});_.yi(this.o)?this.g.warn(_.wb):this.Ta(_.xd,{licenseUrl:this.o,videoRobustness:["3000"],audioRobustness:["2000"],
modifiers:{licenseRequest:this.h.bind(this)}});_.yi(this.l)?this.g.warn(_.Ua):_.yi(this.j)?this.g.warn(_.Ta):this.Ta(_.vd,{licenseUrl:this.l,certificateUrl:this.j,modifiers:{licenseRequest:this.J.bind(this),licenseResponse:this.K.bind(this),extractContentId:this.H.bind(this)}})}h(a,b){if(this.C===Nv){a=this.B[Lv];const c={};c[this.B[Kv]]=this.A;this.a&&(c[a]=this.a);Object.keys(c).forEach(d=>{b.headers[d]=c[d]})}}H(a,b){a=_.Ll(b);switch(this.F){case Ov:a=_.kj({r:a,Zh:this.G},!0)}return a}J(a,b){this.h(a,
b);_.Ql(b)}K(a,b){_.Rl(b)}};_.z(Gv,Pv);Pv.prototype.constructor=Pv.prototype.constructor;Pv.NAME=Fv;var Iv="query-string",Nv="http-header";Pv.LicenseRequestVuidLocation={QUERY_STRING:Iv,HTTP_HEADER:Nv};var Kv="DeviceId",Lv="Authenticator";Pv.LicenseRequestHttpHeader={DEVICE_ID_HEADER:Kv,AUTHENTICATOR_HEADER:Lv};var Mv="keyid",Ov="contentid-siteid";Pv.FairPlayAssetIdStrategy={KEYID:Mv,CONTENTID_SITEID:Ov};_.z(Hv,class extends _.Yt{constructor(){super();this.g=new _.R(Hv)}a(){delete _.nl.VerimatrixVCAS}h(a){a=a.getConfiguration();if(a.drm&&a.drm.env===Fv){({customData:a}=a.drm);if(!a)throw new _.H(_.F,7,7100,_.Ad);a=new Pv(a);this.g.info("Registering the Verimatrix VCAS Ultra environment");_.ol(a)}}id(){return"verimatrix-vcas"}});};f.call(g, window);