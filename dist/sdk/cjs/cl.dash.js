(function(){var g={}; var _ = _ || {}
var f=function(window){var BL="Channel parsing failure! Ignoring scheme and value",CL="ContentProtection",DL="EssentialProperty",EL="Failed to parse UTCTiming tags.",FL="Missing \x3cms:pro/\x3e node in ContentProtection element",GL="No UTCTiming elements found.",HL="SegmentBase does not contain sufficient segment information:",IL="SegmentList does not contain sufficient segment information:",JL="SegmentTemplate does not contain sufficient segment information:",KL="SegmentTimeline",LL='The last "S" element cannot have a negative repeat',
ML="duration",NL="http://dashif.org/guidelines/trickmode",OL="http://www.w3.org/1999/xlink",PL='ignoring the last "S" element.',QL='ignoring the remaining "S" elements.',RL="presentationTimeOffset",SL="schemeIdUri",TL="static",UL="timescale",VL="urn:microsoft:playready",WL="urn:mpeg:cenc:2013",XL="urn:mpeg:dash:utc:http-head:2014",YL="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",ZL="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",$L=function(a,b){a.H=Math.max(a.H,b);a.g.debug("notifyAvailabilityTimeOffset: maxAvailabilityTimeOffset\x3d"+
a.H)},aM=function(a,b){return a.reduce(function(c,d,e){return d["catch"](c.bind(null,e))}.bind(null,b),Promise.reject())},bM=function(a){return new _.Sj(Promise.reject(a),function(){return Promise.resolve()})},cM=function(a){return new _.Sj(Promise.all(a.map(function(b){return b.P})),function(){return Promise.all(a.map(function(b){return b.abort()}))})},dM=function(a,b,c){return Array.prototype.filter.call(a.childNodes,function(d){return d instanceof Element&&d.localName===c&&d.namespaceURI===b})},
eM=function(a,b,c){a=dM(a,b,c);return 1!==a.length?null:a[0]},fM=function(a,b,c){return a.hasAttributeNS(b,c)?a.getAttributeNS(b,c):null},gM=function(a,b,c,d){d=void 0===d?null:d;var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?d:e},hM=function(a){if(!a)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)},iM=function(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);
if(!b)return _.Ih("Invalid duration string:",a),null;a=31536E3*Number(b[1]||null)+2592E3*Number(b[2]||null)+86400*Number(b[3]||null)+3600*Number(b[4]||null)+60*Number(b[5]||null)+Number(b[6]||null);return isFinite(a)?a:null},jM=function(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null},kM=function(a){a=Number(a);return 0===a%1?a:null},lM=function(a){a=Number(a);return 0===a%1&&0<a?a:null},mM=function(a){a=
Number(a);return 0===a%1&&0<=a?a:null},nM=function(a){var b;a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1])/Number(b[2]):Number(a);return isNaN(a)?null:a},oM=function(a,b){try{var c=_.S.ba(a);return _.Jn(c,b)}catch(d){return null}},pM=function(a){var b=void 0===b?1024:b;if(!(a instanceof Uint8Array))return"";if(typeof b!==_.k||0>=b)b=1024;return(a.byteLength>b?a.subarray(0,b):a).toString()},qM=function(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,
function(g,h,l,m){if("$$"===g)return"$";var n=f[h];if(null==n)return _.Ih("URL template does not have an available substitution ","for identifier",'"'+h+'":',a),g;"RepresentationID"===h&&l&&(_.Ih("URL template should not contain a width specifier for identifier",'"RepresentationID":',a),l=void 0);"Time"===h&&(n=Math.round(n));switch(m){case void 0:case "d":case "i":case "u":g=n.toString();break;case "o":g=n.toString(8);break;case "x":g=n.toString(16);break;case "X":g=n.toString(16).toUpperCase();
break;default:g=n.toString()}l=window.parseInt(l,10)||1;return Array(Math.max(0,l-g.length)+1).join("0")+g})},tM=function(a,b){var c=rM(a,b,UL),d=1;c&&(d=lM(c)||1);c=rM(a,b,ML);(c=lM(c||""))&&(c/=d);var e=Number(rM(a,b,RL))||0,f=e/d||0;a.vl&&null!=a.Ud&&a.Ud!==f&&(_.Ih("The stream is non-compliant with the DASH spec. The value of `presentationTimeOffset` has changed during the transition from dynamic to static manifest, which is not allowed. The last value will be ignored. (Period ID: "+(a.Ta.id+
", Representation ID: ")+(a.O.id+")")),e=a.Ud*d,f=a.Ud);var g=rM(a,b,"startNumber"),h=mM(g||"");if(null==g||null==h)h=1;g=rM(a,b,"endNumber");g=null!==g?mM(g||""):null;var l=sM(a,b,KL),m=null;if(l){m=d;var n=e,p=a.za.duration||Infinity;l=_.Gn(l,"S");for(var q=[],u=0,v=0;v<l.length;++v){var z=l[v],A=gM(z,"t",mM),G=gM(z,"d",mM),F=gM(z,"r",kM);null!=A&&(A-=n);if(!G){_.Ih('"S" element must have a duration:',QL,z);break}A=null!=A?A:u;F=F||0;if(0>F)if(v+1<l.length){F=gM(l[v+1],"t",mM);if(null==F){_.Ih('An "S" element cannot have a negative repeat',
'if the next "S" element does not have a valid start time:',QL,z);break}else if(A>=F){_.Ih('An "S" element cannot have a negative repeat if its start ','time exceeds the next "S" element\'s start time:',QL,z);break}F=Math.ceil((F-A)/G)-1}else{if(Infinity===p){_.Ih(LL,"if the Period has an infinite duration:",PL,z);break}else if(A/m>=p){_.Ih(LL,"if its start time exceeds the Period's duration:",PL,z);break}F=Math.ceil((p*m-A)/G)-1}0<q.length&&A!==u&&(Math.abs((A-u)/m)>=_.$u&&_.Ih("SegmentTimeline contains a large gap/overlap:",
"the content may have errors in it.",z),q[q.length-1].end=A/m);for(z=0;z<=F;++z)u=A+G,q.push({start:A/m,end:u/m,yn:A}),A=u}m=q}n=rM(a,b,"availabilityTimeOffset");p=Number(n||"");p=isNaN(p)?null:p;if(null==n||null==p)p=0;return{timescale:d,Fa:c,Ac:h,Af:g,xb:f,rg:e,timeline:m,kf:p}},rM=function(a,b,c){return[b(a.O),b(a.ta),b(a.Ta)].filter(_.Gi).map(function(d){return d.getAttribute(c)}).reduce(function(d,e){return d||e})},sM=function(a,b,c){return[b(a.O),b(a.ta),b(a.Ta)].filter(_.Gi).map(function(d){return _.Hn(d,
c)}).reduce(function(d,e){return d||e})},vM=function(a,b,c,d,e,f){for(var g=fM(a,OL,"href"),h=fM(a,OL,"actuate")||"onRequest",l=0;l<a.attributes.length;l++){var m=a.attributes[l];m.namespaceURI===OL&&(a.removeAttributeNS(m.namespaceURI,m.localName),--l)}if(5<=f)return bM(new _.N(_.O,4,4028));if("onLoad"!==h)return bM(new _.N(_.O,4,4027));var n=_.KC([d],[g]);d=_.Mj(n,b);d.type=1;return e.fetch(d).ne(function(p){p=oM(p.data,a.tagName);if(!p)return bM(new _.N(_.O,4,4001,{uri:g}));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);
for(;p.childNodes.length;){var q=p.childNodes[0];p.removeChild(q);a.appendChild(q)}for(q=0;q<p.attributes.length;q++){var u=p.attributes[q].nodeName,v=p.getAttribute(u);a.setAttribute(u,v)}return uM(a,b,c,n[0],e,f+1)})},uM=function(a,b,c,d,e,f){f=void 0===f?0:f;if(fM(a,OL,"href")){var g=vM(a,b,c,d,e,f);c&&(g=g.ne(void 0,function(){return uM(a,b,c,d,e,f)}));return g}g=[];for(var h=0;h<a.childNodes.length;h++){var l=a.childNodes[h];l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"===fM(l,
OL,"href")?(a.removeChild(l),--h):l.tagName!==KL&&g.push(uM(l,b,c,d,e,f)))}return cM(g).ne(function(){return a})},wM=function(a,b,c){var d=a.za.duration,e=a.za.Hh;if(!a.zf)return e=new _.LD(b),_.hD(e,d),e;var f=a.Ta;var g=a.O;f=f&&f.id&&g&&g.id?f.id+","+g.id:null;if(!a.Lh||null==c[f])return a=new _.LD(b),e||_.hD(a,d),c[f]=a;c=c[f];e||_.hD(new _.LD(b),d);c.pa(b);_.ND(c,_.zD(a.presentationTimeline)-a.za.start);return c},xM=function(a,b){var c=a.presentationTimeline,d=_.fh(b.a).concat();c.l||0===d.length||
(c.J=Math.floor(Math.max(c.J||0,d[d.length-1].endTime+a.za.start)));a.Lh||_.wD(a.presentationTimeline,_.fh(b.a).concat(),a.za.start)},zM=function(a,b,c,d){var e,f=(new _.Rm).Y("sidx",function(h){e=yM(b,d,c,h)});a&&f.parse(a);if(e)return e;f=b+"-"+(b+a.byteLength-1);var g=c[0];a=_.oj(a);_.Oh('Invalid box type. Expected "sidx", but received:',a,"from:",g,"byte range:",f);throw new _.N(_.O,3,3004,{url:g,Vn:f,size:a.byteLength,no:pM(a)});},yM=function(a,b,c,d){var e=[];d.reader.skip(4);var f=_.W(d.reader);
if(0===f)throw _.Oh("Invalid timescale."),new _.N(_.O,3,3005);if(0===d.version){var g=_.W(d.reader);var h=_.W(d.reader)}else g=_.Om(d.reader),h=_.Om(d.reader);d.reader.skip(2);var l=_.Mm(d.reader);a=a+d.size+h;for(h=0;h<l;h++){var m=_.W(d.reader),n=(m&2147483648)>>>31;m&=2147483647;var p=_.W(d.reader);d.reader.skip(4);if(1===n)throw _.Oh("Hierarchical SIDXs are not supported."),new _.N(_.O,3,3006);e.push(new _.ej(e.length,g/f-b,(g+p)/f-b,function(){return c},a,a+m-1,b));g+=p;a+=m}d.parser.stop();
return e},AM=function(a){this.f=a;this.a=new _.Im(a,!1)},EM=function(a){var b=BM(a);if(7<b.length)throw new _.N(_.O,3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=BM(a);a:{d=_.w(CM);for(var e=d.next();!e.done;e=d.next())if(_.Dj(c,new Uint8Array(e.value))){d=!0;break a}d=!1}if(d)c=a.f.byteLength-a.a.getPosition();else{if(8===c.length&&c[1]&224)throw new _.N(_.O,3,3001);d=c[0]&(1<<8-c.length)-1;for(e=1;e<c.length;e++)d=256*d+c[e];c=d}c=a.a.getPosition()+c<=a.f.byteLength?c:a.f.byteLength-
a.a.getPosition();d=new DataView(a.f.buffer,a.f.byteOffset+a.a.getPosition(),c);a.a.skip(c);return new DM(b,d)},BM=function(a){var b=_.Lm(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new _.N(_.O,3,3002);var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=_.Lm(a.a);return d},DM=function(a,b){this.id=a;this.a=b},FM=function(a){if(8<a.a.byteLength)throw new _.N(_.O,3,3002);if(8===a.a.byteLength&&a.a.getUint8(0)&224)throw new _.N(_.O,3,3001);for(var b=0,c=0;c<a.a.byteLength;c++){var d=a.a.getUint8(c);
b=256*b+d}return b},GM=function(){},IM=function(a,b,c,d,e,f){function g(){return e}var h=[];a=new AM(a.a);for(var l=null,m=null;_.Jm(a.a);){var n=EM(a);if(187===n.id){var p=HM(n);p&&(n=c*p.zn,p=b+p.Wm,null!=l&&h.push(new _.ej(h.length,l-f,n-f,g,m,p-1,f)),l=n,m=p)}}null!=l&&h.push(new _.ej(h.length,l-f,d-f,g,m,null,f));return h},HM=function(a){var b=new AM(a.a);a=EM(b);if(179!==a.id)throw _.Ih("Not a CueTime element."),new _.N(_.O,3,3013);a=FM(a);b=EM(b);if(183!==b.id)throw _.Ih("Not a CueTrackPositions element."),
new _.N(_.O,3,3012);b=new AM(b.a);for(var c=0;_.Jm(b.a);){var d=EM(b);if(241===d.id){c=FM(d);break}}return{zn:a,Wm:c}},JM=function(a,b){var c=sM(a,b,"Initialization");if(!c)return null;var d=a.O.eb,e=c.getAttribute("sourceURL");e&&(d=_.KC(a.O.eb,[e]));e=0;var f=null;if(c=gM(c,"range",jM))e=c.start,f=c.end;return new _.MC(function(){return d},e,f)},MM=function(a,b){var c=Number(rM(a,KM,RL))||0,d=rM(a,KM,UL),e=1;d&&(e=lM(d)||1);c=c/e||0;d=JM(a,KM);e=a.O.mimeType.split("/")[1];if(a.O.contentType!==_.P&&
"mp4"!==e&&"webm"!==e)throw _.Oh("SegmentBase specifies an unsupported container type.",a.O),new _.N(_.O,4,4006);if("webm"===e&&!d)throw _.Oh(HL,"the SegmentBase uses a WebM container,","but does not contain an Initialization element.",a.O),new _.N(_.O,4,4005);var f=sM(a,KM,"RepresentationIndex"),g=rM(a,KM,"indexRange"),h=a.O.eb;g=jM(g||"");if(f){var l=f.getAttribute("sourceURL");l&&(h=_.KC(a.O.eb,[l]));g=gM(f,"range",jM,g)}if(!g)throw _.Oh(HL,"the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",
a.O),new _.N(_.O,4,4002);a.presentationTimeline.B=null;e=LM(a,b,d,h,g.start,g.end,e,c);return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,adjustSegmentDurations:e.adjustSegmentDurations,getDuration:e.getDuration,initSegmentReference:d,getLastSegmentEndTime:e.getLastSegmentEndTime,Aa:c}},LM=function(a,b,c,d,e,f,g,h){var l=a.presentationTimeline,m=!a.zf||!a.za.Hh,n=a.za.start,p=a.za.duration,q=b,u=null;return{createSegmentIndex:function(v){var z,
A,G,F,C,H;return _.I(function(Q){if(1==Q.a)return z=[q(d,e,f,v),"webm"===g?q(c.Sa(),c.xa,c.ka,v):null],q=null,_.y(Q,Promise.all(z),2);A=Q.f;G=A[0];F=A[1]||null;C=null;"mp4"===g?C=zM(G,e,d,h):(H=new GM,C=H.parse(G,F,d,h));_.wD(l,C,n);u=new _.LD(C);m&&_.hD(u,p);return Q["return"](A)})},findSegmentPosition:function(v){return u.find(v)},getSegmentReference:function(v){return u.get(v)},adjustSegmentDurations:function(v,z){return u.od(v,z)},getDuration:function(){return u.getDuration()},getLastSegmentEndTime:function(){return p}}},
KM=function(a){return a.$d},TM=function(a,b,c,d){var e=NM(a),f=OM(a);PM(a,f);var g=null;if(f.Od)a.presentationTimeline.B=null,g=QM(a,b,e,f);else if(f.Fa)d||(a.presentationTimeline.B=null,$L(a.presentationTimeline,f.kf),_.xD(a.presentationTimeline,f.Fa),_.uD(a.presentationTimeline,a.za.start)),g=RM(a,f);else{b=SM(a,f);var h=wM(a,b,c);xM(a,h);g={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:h.find.bind(h),getSegmentReference:h.get.bind(h),adjustSegmentDurations:h.od.bind(h),getDuration:h.getDuration.bind(h),
getLastSegmentEndTime:function(){return _.MD(h)}}}return{createSegmentIndex:g.createSegmentIndex,findSegmentPosition:g.findSegmentPosition,getSegmentReference:g.getSegmentReference,adjustSegmentDurations:g.adjustSegmentDurations,getDuration:g.getDuration,initSegmentReference:e,getLastSegmentEndTime:g.getLastSegmentEndTime,Aa:f.xb}},UM=function(a){return a.fc},OM=function(a){var b=tM(a,UM),c=rM(a,UM,"media");a=rM(a,UM,"index");return{Fa:b.Fa,timescale:b.timescale,Ac:b.Ac,Af:b.Af,xb:b.xb,rg:b.rg,timeline:b.timeline,
Mf:c,Od:a,kf:b.kf}},PM=function(a,b){var c=b.Od?1:0;c+=b.timeline?1:0;c+=b.Fa?1:0;if(0===c)throw _.Oh("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",a.O),new _.N(_.O,4,4002);1!==c&&(_.Ih("SegmentTemplate contains multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",a.O),b.Od?(_.Mh("Using the index URL template by default."),
b.timeline=null):_.Mh("Using the SegmentTimeline by default."),b.Fa=null);if(!b.Od&&!b.Mf)throw _.Oh(JL,"the SegmentTemplate's media URL template is missing.",a.O),new _.N(_.O,4,4002);},QM=function(a,b,c,d){var e=a.O.mimeType.split("/")[1];if("mp4"!==e&&"webm"!==e)throw _.Oh("SegmentTemplate specifies an unsupported container type.",a.O),new _.N(_.O,4,4006);if("webm"===e&&!c)throw _.Oh(JL,"the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",a.O),new _.N(_.O,
4,4005);var f=qM(d.Od,a.O.id,null,a.bandwidth||null,null);f=_.KC(a.O.eb,[f]);return LM(a,b,c,f,0,null,e,d.xb)},RM=function(a,b){var c=b.Mf,d=a.za.duration,e=b.Fa,f=b.Ac,g=b.Af,h=b.timescale,l=a.bandwidth||null,m=a.O.id,n=a.O.eb;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(p){return 0>p||d&&p>=d?null:Math.floor(p/e)},getSegmentReference:function(p){var q=p+f;if(null!==g&&q>g)return null;var u=p*e,v=u+e;d&&(v=Math.min(v,d));return 0>v||d&&u>=d?null:new _.ej(p,
u,v,function(){var z=qM(c,m,q,l,u*h);return _.KC(n,[z])},0,null,b.xb)},adjustSegmentDurations:function(){},getDuration:function(){return d},getLastSegmentEndTime:function(){return d}}},SM=function(a,b){var c=b.Mf,d=b.timeline;if(0===d.length)return[];for(var e=[],f={},g=0;g<d.length;f={df:f.df,he:f.he,Xe:f.Xe,ff:f.ff,Ye:f.Ye},g++)f.he=g+b.Ac,f.ff=d[g].yn+b.rg,f.df=a.O.id,f.Xe=a.bandwidth||null,f.Ye=a.O.eb,e.push(new _.ej(f.he,d[g].start,d[g].end,function(h){return function(){var l=qM(c,h.df,h.he,
h.Xe,h.ff);return _.KC(h.Ye,[l])}}(f),0,null,b.xb));return e},NM=function(a){var b=rM(a,UM,"initialization");if(!b)return null;var c=a.O.id,d=a.bandwidth||null,e=a.O.eb;return new _.MC(function(){var f=qM(b,c,null,d,null);return _.KC(e,[f])},0,null)},ZM=function(a,b){var c=JM(a,VM),d=WM(a);XM(a,d);var e=YM(a.za.duration,d.Ac,a.O.eb,d),f=wM(a,e,b);xM(a,f);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),adjustSegmentDurations:f.od.bind(f),
getDuration:f.getDuration.bind(f),initSegmentReference:c,getLastSegmentEndTime:function(){return _.MD(f)},Aa:d.xb}},VM=function(a){return a.ec},WM=function(a){var b=$M(a);a=tM(a,VM);var c=a.Ac;0===c&&(_.Ih("SegmentList@startNumber must be \x3e 0"),c=1);var d=0;a.Fa?d=a.Fa*(c-1):a.timeline&&0<a.timeline.length&&(d=a.timeline[0].start);return{Fa:a.Fa,startTime:d,Ac:c,xb:a.xb,timeline:a.timeline,wc:b}},XM=function(a,b){if(!b.Fa&&!b.timeline&&1<b.wc.length)throw _.Ih(IL,"the SegmentList specifies multiple segments,",
"but does not specify a segment duration or timeline.",a.O),new _.N(_.O,4,4002);if(!b.Fa&&!a.za.duration&&!b.timeline&&1===b.wc.length)throw _.Ih(IL,"the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",a.O),new _.N(_.O,4,4002);if(b.timeline&&0===b.timeline.length)throw _.Ih(IL,"the SegmentList has an empty timeline.",a.O),new _.N(_.O,4,4002);},YM=function(a,b,c,d){var e=d.wc.length;d.timeline&&d.timeline.length!==d.wc.length&&(e=Math.min(d.timeline.length,
d.wc.length),_.Ih("The number of items in the segment timeline and the number of","segment URLs do not match, truncating",d.wc.length,"to",e));for(var f=[],g=d.startTime,h={},l=0;l<e;h={bf:h.bf},l++){var m=d.wc[l];h.bf=_.KC(c,[m.Hl]);var n=void 0;n=null!=d.Fa?g+d.Fa:d.timeline?d.timeline[l].end:g+a;f.push(new _.ej(l+b,g,n,function(p){return function(){return p.bf}}(h),m.start,m.end,d.xb));g=n}return f},$M=function(a){return[a.O.ec,a.ta.ec,a.Ta.ec].filter(_.Gi).map(function(b){return _.Gn(b,"SegmentURL")}).reduce(function(b,
c){return 0<b.length?b:c}).map(function(b){b.getAttribute("indexRange")&&!a.If&&(a.If=!0,_.Ih("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var c=b.getAttribute("media");b=gM(b,"mediaRange",jM,{start:0,end:null});return{Hl:c,start:b.start,end:b.end}})},aN=function(a,b){this.g=a;this.f=b;this.a={clockSyncUri:void 0}},cN=function(a,b,c,d){var e,f;return _.I(function(g){switch(g.a){case 1:return e=
_.Gn(b,"UTCTiming"),_.D(g,2),_.y(g,bN(a,c,e),4);case 4:f=g.f;d.I=f;a.g.info("Clock synchronized. The difference between server and client clock was "+(f+" ms."));_.th(g,3);break;case 2:_.E(g),a.g.warn("Failed to synchronize clocks. This content may not play on clients with bad clocks!");case 3:return g["return"](d)}})},bN=function(a,b,c){c=c.map(function(e){return{scheme:e.getAttribute(SL),value:e.getAttribute(_.Hg)}});var d=a.a.clockSyncUri;!c.length&&d&&(a.g.info("No UTCTiming elements found, falling back on clockSyncUri from config to synchronize clocks."),
c.push({scheme:XL,value:d}));return 0===c.length?(a.g.warn(GL),Promise.reject(Error(GL))):aM(c,function(e){var f=e.scheme;e=e.value;switch(f){case XL:case "urn:mpeg:dash:utc:http-head:2012":return dN(a,b,e,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return dN(a,b,e,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":var g=Date.parse(e);return isNaN(g)?
(a.g.warn("Invalid date for scheme "+f+", value: "+e),Promise.reject()):Promise.resolve(g-Date.now());case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return a.g.warn("NTP UTCTiming scheme is not supported"),Promise.reject();default:return a.g.warn("Unrecognized scheme in UTCTiming element",f),Promise.reject()}})["catch"](function(){a.g.warn(EL);return Promise.reject(Error(EL))})},dN=function(a,b,c,d){var e,f,g,h;return _.I(function(l){if(1==
l.a)return e=_.KC(b,[c]),_.y(l,a.f(e,d),2);f=l.f;if("HEAD"===d){if(!f.headers||!f.headers.date)throw a.g.warn("UTC timing response is missing","expected date header"),Error("Date HTTP header missing.");g=f.headers.date}else g=_.S.ba(f.data);h=Date.parse(g);if(isNaN(h))throw a.g.warn("Unable to parse date from UTC timing response"),Error("Date value invalid.");return l["return"](h-Date.now())})},fN=function(a,b){return a.find(function(c){return eN.get(c.Pb)===b})},hN=function(a){var b=eM(a.node,VL,
"pro");if(!b)return gN.warn(FL,a),null;a=_.Aj(b.textContent);a=_.Un(a);a=_.Nn(a.a);return{keyId:null,Pb:ZL,node:document.createElement("null"),init:[{initData:_.yC(a),initDataType:_.vd,keyId:null}]}},iN=function(a,b){b=void 0===b?"4.0.0.0":b;var c=eM(a.node,WL,"pssh");if(!c)return _.Ih("Missing \x3ccenc:pssh/\x3e node in ContentProtection element",a),null;c=_.Aj(c.textContent);c=_.On(c);return c?(c=_.zC(b,c.a))?{keyId:null,Pb:YL,node:document.createElement("null"),init:[{initData:_.yC(c),initDataType:_.vd,
keyId:null}]}:null:(_.Ih("Unable to parse WV PSSH data. Can not create PR data!"),null)},jN=function(a,b){var c=eM(a.node,VL,"pro");if(!c)return _.Ih(FL,a),null;c=_.Aj(c.textContent);c=_.Un(c);return c.version!==b&&(_.Nh("Parsing from "+c.version+" to "+b+"."),c=_.AC(c,b))?{keyId:null,Pb:YL,node:document.createElement("null"),init:[{initData:_.yC(c),initDataType:_.vd,keyId:null}]}:null},mN=function(a,b,c,d){var e=kN(a),f=null;a=[];var g=[],h=fN(e,_.Vd),l=fN(e,_.Td);if(l&&d){var m=jN(l,d);m&&(e[e.indexOf(l)]=
m)}l&&!h&&(m=hN(l))&&e.push(m);h&&!l&&(d=iN(h,d||void 0))&&e.push(d);d=new Set(e.map(function(n){return n.keyId}));d["delete"](null);if(1<d.size)throw new _.N(_.O,4,4010);b||(g=e.filter(function(n){return"urn:mpeg:dash:mp4protection:2011"===n.Pb?(f=n.init||f,!1):!0}),g.length&&(a=lN(f,g,c),0===a.length&&(a=[_.LC(_.Ze,f,c)])));if(e.length&&(b||!g.length))for(a=[],b=_.w(eN.values()),e=b.next();!e.done;e=b.next())e=e.value,e!==_.hf&&a.push(_.LC(e,f,c));if(c=Array.from(d)[0]||null)for(b=_.w(a),e=b.next();!e.done;e=
b.next())for(e=_.w(e.value.initData),g=e.next();!g.done;g=e.next())g.value.keyId=c;return{wd:c,$n:f,drmInfos:a,mh:!0}},nN=function(a,b,c,d,e){var f=mN(a,c,d,e);if(b.mh){a=1===b.drmInfos.length&&!b.drmInfos[0].keySystem;c=0===f.drmInfos.length;if(0===b.drmInfos.length||a&&!c)b.drmInfos=f.drmInfos;b.wd=f.wd||b.wd;b.mh=!1}else if(0<f.drmInfos.length&&(b.drmInfos=b.drmInfos.filter(function(g){return f.drmInfos.some(function(h){return h.keySystem===g.keySystem})}),0===b.drmInfos.length))throw new _.N(_.O,
4,4008);return f.wd||b.wd},lN=function(a,b,c){var d=[];b=_.w(b);for(var e=b.next();!e.done;e=b.next()){e=e.value;var f=eN.get(e.Pb);if(f){var g=_.LC(f,e.init||a,c);if(f=oN.get(f))g.licenseServerUri=f(e);d.push(g)}}return d},kN=function(a){var b=[];a=_.w(a);for(var c=a.next();!c.done;c=a.next())(c=pN(c.value))&&b.push(c);return b},pN=function(a){var b=a.getAttribute(SL),c=fM(a,WL,"default_KID"),d=dM(a,WL,"pssh").map(_.In),e=eM(a,VL,"pro");if(!b)return _.Oh("Missing required schemeIdUri attribute on",
"ContentProtection element",a),null;b=b.toLowerCase();if(c&&(c=c.replace(/-/g,"").toLowerCase(),c.includes(" ")))throw new _.N(_.O,4,4009);var f=[];try{if(f=d.map(function(l){return{initDataType:_.vd,initData:_.Aj(l),keyId:null}}),0===f.length&&e)try{var g=_.Aj(e.textContent),h=_.Un(g);f.push({initDataType:_.vd,initData:_.yC(h),keyId:null})}catch(l){_.Ih("Unable to parse ms:pro payload",l),f=[]}}catch(l){throw new _.N(_.O,4,4007);}return{node:a,Pb:b,keyId:c,init:0<f.length?f:null}},qN=function(){var a=
this;this.C=this.a=null;this.j=[];this.f=null;this.D=[];this.o=1;this.G={};this.h=0;this.H=new _.jD(5);this.w=new _.Zk(function(){a.Mb()});this.l=new _.Vj;this.g=new _.K("clpp.dash.DashParser");this.A=null;this.I=new aN(this.g,function(b,c){var d=_.Mj(b,a.a.attemptParameters);d.type=5;d.method=c;d=a.C.networkingEngine.fetch(d);_.Wj(a.l,d);return d.P});this.B=new Map;this.J=!1},sN=function(a){var b,c,d,e,f,g,h,l,m;return _.I(function(n){if(1==n.a)return b=_.Mj(a.j,a.a.attemptParameters),b.type=1,c=
a.C.networkingEngine,d=Date.now(),e=c.fetch(b),_.Wj(a.l,e),_.y(n,e.P,2);if(3!=n.a){f=n.f;if(!a.C)return n["return"](0);f.uri&&!a.j.includes(f.uri)&&a.j.unshift(f.uri);g=null!=a.f;return _.y(n,rN(a,f.data,f.uri),3)}h=n.f;l=Date.now();m=(l-d)/1E3;_.kD(a.H,1,m);if(g&&a.C.onUpdate)a.C.onUpdate(h.manifest);if(h.vn){if(a.C.onTurnedStatic)a.C.onTurnedStatic();a.C.onEvent(new _.L(_.Xe))}return n["return"](m)})},rN=function(a,b,c){var d,e,f,g;return _.I(function(h){if(1==h.a){d=oM(b,"MPD");if(!d)throw new _.N(_.O,
4,4001,c);e=a.a.xlinkFailGracefully;f=uM(d,a.a.attemptParameters,e,c,a.C.networkingEngine);_.Wj(a.l,f);return _.y(h,f.P,2)}g=h.f;return h["return"](tN(a,g,c))})},tN=function(a,b,c){var d,e,f,g,h,l,m,n,p,q,u,v,z,A,G,F;return _.I(function(C){if(1==C.a){d=[c];e=_.Gn(b,"Location").map(_.In).filter(_.Gi);0<e.length&&(f=_.KC(d,e),d=a.j=f);g=_.Gn(b,"BaseURL").map(_.In);h=_.KC(d,g);l=b.getAttribute("type")||TL;a.h=gM(b,"minimumUpdatePeriod",iM,-1);l===TL&&0<=a.h&&(a.g.warn("Invalid manifest - a static manifest should not contain the `minimumUpdatePeriod` attribute. The attribute will be ignored."),
a.h=-1,a.w.stop());m=gM(b,"maxSegmentDuration",iM);if(n=l===TL&&"dynamic"===a.A)a.g.info("MPD dynamic to static transition."),l="dynamic";p=l===TL;q="dynamic"===l;if(a.f)var H=a.f.presentationTimeline;else{H=a.a.timeline||{};var Q=gM(b,"suggestedPresentationDelay",iM),R=gM(b,"minBufferTime",iM,0);Q=null!=a.a.suggestedPresentationDelay?a.a.suggestedPresentationDelay:a.a.lowLatencyMode?0:null!=Q?Q:3*R;R=gM(b,"availabilityStartTime",hM);H=new _.pD(H,R,Q,p,!!a.a.autoCorrectDrift,!!a.a.lowLatencyMode);
H=p?H:cN(a.I,b,h,H)}return _.y(C,H,2)}u=C.f;H=gM(b,"timeShiftBufferDepth",iM);v=q&&a.a.availabilityWindowOverride&&!isNaN(a.a.availabilityWindowOverride)?a.a.availabilityWindowOverride:null===H?Infinity:H;u.A=v;if(!a.C)throw new _.N(_.O,7,7001);z={zf:q,Lh:null!=a.f,presentationTimeline:u,Ta:null,za:null,ta:null,O:null,bandwidth:0,If:!1,vl:n,jg:null,Ud:null};A=uN(a,z,h,b);G=A.duration;F=A.periods;n&&(vN(F,z),u.D=!0);if(p||!n&&!A.fh)u.f=G||Infinity,G&&_.oD(u.a,0,G);_.xD(u,m||1);u.isLive();a.f||(a.f=
{presentationTimeline:u,periods:F,minBufferTime:0});a.A=l;return C["return"]({manifest:a.f,vn:n})})},uN=function(a,b,c,d){var e=gM(d,"mediaPresentationDuration",iM),f=a.f?a.f.periods[a.f.periods.length-1]||null:null,g=[],h=0;d=_.Gn(d,"Period");for(var l=0;l<d.length;l++){var m=d[l];h=gM(m,_.ig,iM,h);var n=gM(m,ML,iM),p=null;if(l!==d.length-1){var q=gM(d[l+1],_.ig,iM);null!=q&&(p=q-h)}else null!=e&&(p=e-h);q=_.$u;p&&n&&Math.abs(p-n)>q&&a.g.warn("There is a gap/overlap between Periods",m);null==p&&
(p=n);m=wN(a,b,c,{start:h,duration:p,node:m,Hh:null==p||l===d.length-1});g.push(m);a.D.includes(m.id)||(a.D.push(m.id),a.f&&(a.C.filterNewPeriod(m),a.f.periods.push(m)));if(null==p){l!==d.length-1&&a.g.warn("Skipping Period",l+1,"and any subsequent Periods:","Period",l+1,"does not have a valid start time.",g[l+1]);h=null;break}h+=p}null==a.f&&a.C.filterAllPeriods(g);f&&(b=g.find(function(u){return u.id===f.id}))&&(f.endTime=b.endTime);return null!=e?(h!==e&&a.g.warn("@mediaPresentationDuration does not match the total duration of ",
"all Periods."),{periods:g,duration:e,fh:!1}):{periods:g,duration:h,fh:!0}},wN=function(a,b,c,d){b.Ta=xN(a,d.node,null,c);b.za=d;c=b.Ta.id||"__clpp_period_"+d.start;b.Ta.id||(a.g.info("No Period ID given for Period with start time "+d.start+(",  Assigning a default: "+c+".")),b.Ta.id=c);var e=_.Gn(d.node,"EventStream");e=_.w(e);for(var f=e.next();!f.done;f=e.next())yN(a,d.start,d.duration,f.value);f=_.Gn(d.node,_.ka).map(function(q){return zN(a,b,q)}).filter(_.Gi);if(b.zf){e=[];for(var g=_.w(f),h=
g.next();!h.done;h=g.next()){h=_.w(h.value.Zm);for(var l=h.next();!l.done;l=h.next())e.push(l.value)}if(e.length!==(new Set(e)).size)throw new _.N(_.O,4,4018);}e=f.filter(function(q){return!q.pg});g=f.filter(function(q){return q.pg});g=_.w(g);for(h=g.next();!h.done;h=g.next()){l=h.value;l.streams.forEach(function(q){q.trickPlay=!0});h=l.streams[0];l=l.pg;for(var m=_.w(e),n=m.next();!n.done;n=m.next())if(n=n.value,l.includes(n.id)){n=_.w(n.streams);for(var p=n.next();!p.done;p=n.next())p.value.trickModeVideo=
h}}g=AN(f,_.r);h=AN(e,_.cd);if(!g.length&&!h.length)throw new _.N(_.O,4,4004);h.length||(h=[null]);g.length||(g=[null]);f=[];h=_.w(h);for(l=h.next();!l.done;l=h.next())for(l=l.value,m=_.w(g),n=m.next();!n.done;n=m.next())BN(a,l,n.value,f);h=_.fh(AN(e,_.P)).concat(_.fh(AN(e,_.pg)));g=[];h=_.w(h);for(l=h.next();!l.done;l=h.next())g.push.apply(g,l.value.streams);l=AN(e,_.Be);h=[];l=_.w(l);for(m=l.next();!m.done;m=l.next())h.push.apply(h,m.value.streams);e=CN(d,e);return{id:c,configurationId:a.C.configurationId,
startTime:d.start,endTime:e,textStreams:g,thumbStreams:h,variants:f}},CN=function(a,b){if(null!==a.duration)return a.start+a.duration;if(0<b.length){var c=b.filter(function(d){return 0<d.streams.length}).map(function(d){return d.streams}).flat().filter(function(d){return d.getLastSegmentEndTime}).map(function(d){return d.getLastSegmentEndTime()});return 0<c.length?a.start+Math.min.apply(Math,_.fh(c)):null}return null},AN=function(a,b){return a.filter(function(c){return c.contentType===b})},BN=function(a,
b,c,d){var e;if(b||c)if(b&&c){if(_.Xo(b.drmInfos,c.drmInfos)){var f=_.Wo(b.drmInfos,c.drmInfos),g=_.w(b.streams);for(e=g.next();!e.done;e=g.next()){var h=e.value,l=_.w(c.streams);for(e=l.next();!e.done;e=l.next()){var m=e.value;e=(m.bandwidth||0)+(h.bandwidth||0);e={id:a.o++,language:b.language,primary:b.Lf||c.Lf,audio:h,video:m,bandwidth:e,drmInfos:f,allowedByApplication:!0,allowedByKeySystem:!0};d.push(e)}}}}else for(f=b||c,g=_.w(f.streams),e=g.next();!e.done;e=g.next())h=e.value,e=h.bandwidth||
0,e={id:a.o++,language:f.language||_.yg,primary:f.Lf,audio:b?h:null,video:c?h:null,bandwidth:e,drmInfos:f.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},d.push(e)},zN=function(a,b,c){b.ta=xN(a,c,b.Ta,null);var d=!1,e=_.Gn(c,"Role"),f=e.map(function(C){return C.getAttribute(_.Hg)}).filter(_.Gi),g=null,h=_.Gn(c,"Label").map(function(C){return C.textContent}).filter(_.Gi);h&&0<h.length&&(g=h[h.length-1]);var l=void 0;(h=b.ta.contentType===_.P)&&(l=_.pg);e=_.w(e);for(var m=e.next();!m.done;m=
e.next()){m=m.value;var n=m.getAttribute(SL);if(null==n||"urn:mpeg:dash:role:2011"===n||"urn:mpeg:dash:role"===n)switch(m=m.getAttribute(_.Hg),m){case _.Pe:d=!0;break;case _.rd:case _.pg:l=m;break;case "forced-subtitle":case "forced_subtitle":case _.ue:l=_.ue}}m=_.Gn(c,DL);e=null;m=_.w(m);for(var p=m.next();!p.done;p=m.next()){p=p.value;n=p.getAttribute(SL);p=p.getAttribute(_.Hg);if(n!==NL&&!DN.includes(n)||void 0===p)return null;n===NL&&(0===p.length&&(e=null),e=p.split(" "))}m=_.Gn(c,"Accessibility");
var q=new Map;n=_.w(m);for(p=n.next();!p.done;p=n.next()){var u=p.value;p=u.getAttribute(SL);if("urn:scte:dash:cc:cea-608:2015"===p||"urn:scte:dash:cc:cea-708:2015"===p)if(p=1,u=u.getAttribute(_.Hg),null!=u){u=_.w(u.split(";"));for(var v=u.next();!v.done;v=u.next()){var z=v.value,A=v=void 0;z.includes("\x3d")?(z=z.split("\x3d"),v=z[0].startsWith("CC")?z[0]:"CC"+z[0],A=z[1].split(",")[0].split(":").pop()):(v="CC"+p,p+=2,A=z);q.set(v,_.gj(A))}}else q.set("CC1",_.yg)}n=_.Gn(c,CL);var G=mN(n,a.a.ignoreDrmInfo,
b.Ta.id,a.a.playreadyVersion||null),F=c.getAttribute("lang")||_.yg;n=_.gj(F);null==g&&(g=c.getAttribute("label"));p=_.Gn(c,_.Wb);c=p.map(function(C){return EN(a,b,G,l,F,g,d,f,q,C)}).filter(_.Gi);if(0===c.length){if(h)return null;throw new _.N(_.O,4,4003);}if(!b.ta.contentType||b.ta.contentType===_.Uc)for(b.ta.contentType=FN(c[0].mimeType,c[0].codecs),h=_.w(c),u=h.next();!u.done;u=h.next())u.value.type=b.ta.contentType;h=_.w(c);for(u=h.next();!u.done;u=h.next())for(u=u.value,v=_.w(G.drmInfos),z=v.next();!z.done;z=
v.next())z=z.value,u.keyId&&!z.keyIds.includes(u.keyId)&&z.keyIds.push(u.keyId);c=GN(c,b.ta.contentType,m);h=p.map(function(C){return C.getAttribute("id")}).filter(_.Gi);return{id:b.ta.id||"__fake__"+a.o++,contentType:b.ta.contentType,language:n,originalLanguage:F,Lf:d,streams:c,drmInfos:G.drmInfos,pg:e,Zm:h}},GN=function(a,b,c){var d=b===_.pg?_.P:b;b=c.map(function(f){return{scheme:f.getAttribute(SL)||"",id:f.getAttribute("id")||void 0,value:f.getAttribute(_.Hg)||"",protocol:"DASH",type:d}});c=_.w(a);
for(var e=c.next();!e.done;e=c.next())e.value.accessibility=b;return a},EN=function(a,b,c,d,e,f,g,h,l,m){var n=_.gj(e);b.O=xN(a,m,b.ta,null);if(!HN(a,b.O))return a.g.warn("Skipping Representation",b.O),null;b.jg=b.Ta.id+" "+b.O.id;b.Ud=a.B.get(b.jg);b.bandwidth=gM(m,"bandwidth",lM)||0;var p=IN(a,b);if(!p)return null;a.B.set(b.jg,p.Aa);var q=_.Gn(m,CL);a=nN(q,c,a.a.ignoreDrmInfo,b.Ta.id,a.a.playreadyVersion||null);q=!1;_.Gn(m,"SupplementalProperty").some(function(A){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"===
A.getAttribute(SL)&&"JOC"===A.getAttribute(_.Hg)})&&(b.O.mimeType="audio/eac3-joc",q=!0);var u=void 0;if(b.O.contentType===_.Be){var v=(m=_.Hn(m,DL))&&m.getAttribute(SL);if(JN.includes(v||"")&&(m=_.kj(m.getAttribute(_.Hg)||""))&&(p.horizontalTiles=m.Jd,p.verticalTiles=m.be,b.ta.fc)){v=gM(b.ta.fc,ML,mM)||0;var z=gM(b.ta.fc,UL,mM)||1;(v/=z)&&(u=v/m.rn)}}return{id:_.rJ++,originalId:b.O.id,createSegmentIndex:p.createSegmentIndex,findSegmentPosition:p.findSegmentPosition,getSegmentReference:p.getSegmentReference,
initSegmentReference:p.initSegmentReference,adjustSegmentDurations:p.adjustSegmentDurations,getLastSegmentEndTime:p.getLastSegmentEndTime,getDuration:p.getDuration,segmentLookupStrategy:_.hC,mimeType:b.O.mimeType,codecs:b.O.codecs,frameRate:b.O.frameRate,bandwidth:b.bandwidth,width:b.O.width,height:b.O.height,kind:d,encrypted:0<c.drmInfos.length,keyId:a,language:n,originalLanguage:e,label:f,type:b.ta.contentType,primary:g,trickModeVideo:null,emsgSchemeIdUris:b.O.emsgSchemeIdUris,roles:h,channelsCount:b.O.Nf,
spatialAudio:q,closedCaptions:l,horizontalTiles:p.horizontalTiles,verticalTiles:p.verticalTiles,durationPerTile:u}},IN=function(a,b){var c=a.a.attemptParameters,d=b.O.contentType;d=d===_.P||d===_.Uc;try{var e=function(h,l,m,n){var p,q;return _.I(function(u){if(1==u.a)return p=_.mD(h,l,m,c),p.type=2,_.y(u,n.fetch(p),2);q=u.f;return u["return"](q.data)})};if(b.O.$d)return MM(b,e);if(b.O.ec)return ZM(b,a.G);if(b.O.fc)return TM(b,e,a.G,!!a.f);var f=b.O.eb,g=b.za.duration||0;d=function(){return g};return{createSegmentIndex:function(){return Promise.resolve()},
findSegmentPosition:function(h){return 0<=h&&h<g?1:null},getSegmentReference:function(h){return 1!==h?null:new _.ej(1,0,g,function(){return f},0,null,0)},adjustSegmentDurations:function(){},getDuration:d,getLastSegmentEndTime:d,verticalTiles:void 0,horizontalTiles:void 0,initSegmentReference:null,Aa:0}}catch(h){if(d&&4002===h.code)return a.g.debug("Ignoring DASH_NO_SEGMENT_INFO error in a text stream",h),null;throw h;}},KN=function(a,b){0>a.h||a.w.da(Math.max(3,a.h-b,_.lD(a.H)))},xN=function(a,b,
c,d){c=c||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Nf:null};d=d||c.eb;var e=_.Gn(b,"BaseURL").map(_.In),f=b.getAttribute("contentType")||c.contentType,g=b.getAttribute(_.Ue)||c.mimeType,h=b.getAttribute(_.Od)||c.codecs,l=gM(b,"frameRate",nM)||c.frameRate,m=_.Gn(b,"InbandEventStream"),n=c.emsgSchemeIdUris.slice();m=_.w(m);for(var p=m.next();!p.done;p=m.next())p=p.value.getAttribute(SL),n.includes(p)||n.push(p);m=_.Gn(b,"AudioChannelConfiguration");a=LN(a,m)||c.Nf;
f||(f=FN(g,h));return{eb:_.KC(d,e),$d:_.Hn(b,"SegmentBase")||c.$d,ec:_.Hn(b,"SegmentList")||c.ec,fc:_.Hn(b,"SegmentTemplate")||c.fc,width:gM(b,_.Zg,mM)||c.width,height:gM(b,_.xe,mM)||c.height,contentType:f,mimeType:g,codecs:h,frameRate:l,emsgSchemeIdUris:n,id:b.getAttribute("id"),Nf:a}},LN=function(a,b){for(var c=_.w(b),d=c.next();!d.done;d=c.next()){var e=d.value;if(d=e.getAttribute(SL))if(e=e.getAttribute(_.Hg))switch(d){case "urn:mpeg:dash:outputChannelPositionList:2012":return e.trim().split(/ +/).length;
case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":var f=parseInt(e,10);if(!f){a.g.warn(BL,d,e);continue}return f;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":f=parseInt(e,16);if(!f){a.g.warn(BL,d,e);continue}for(c=0;f;)f&1&&++c,f>>=1;return c;default:a.g.warn("Unrecognized audio channel scheme:",d,e)}}return null},HN=function(a,b){var c=b.$d?1:0;c+=b.ec?1:0;c+=
b.fc?1:0;if(0===c){if(b.contentType===_.P||b.contentType===_.Uc)return!0;a.g.warn("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',b);return!1}1!==c&&(a.g.warn("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",b),b.$d?(a.g.info("Using SegmentBase by default."),
b.ec=null):a.g.info("Using SegmentList by default."),b.fc=null);return!0},yN=function(a,b,c,d){var e=d.getAttribute(SL)||"",f=d.getAttribute(_.Hg)||"",g=gM(d,UL,mM)||1,h=gM(d,RL,mM)||0,l={};d=_.w(_.Gn(d,"Event"));for(var m=d.next();!m.done;l={Gc:l.Gc},m=d.next()){m=m.value;var n=gM(m,"presentationTime",mM)||0,p=gM(m,ML,mM)||0;n=b+n/g-h/g;p=n+p/g;null!=c&&(n=Math.min(n,b+c),p=Math.min(p,b+c));var q=_.fi;e.startsWith(_.Bg)?q=_.hi:"urn:mpeg:dash:event:callback:2015"===e&&(q=_.Ye);l.Gc={configurationId:a.C.configurationId,
schemeIdUri:e,value:f,startTime:n,endTime:p,id:m.getAttribute("id")||"",type:q,eventElement:m};l.Gc.type===_.Ye&&(l.Gc.Ke=function(u){return function(){var v=u.Gc;v.eventElement&&(v=v.eventElement.getAttribute("messageData")||"")&&v.startsWith("http")&&(v=_.Mj(v),v.type=_.Lj,a.C.networkingEngine.fetch(v))}}(l));a.C.onTimelineCueAdded(l.Gc)}},FN=function(a,b){return _.vE(_.Uk(a,b))?_.P:a.split("/")[0]},MN=function(a){var b=new Set;a.forEach(function(c){c.variants.forEach(function(d){d.audio&&b.add(d.audio);
d.video&&b.add(d.video)})});return Array.from(b)},vN=function(a,b){var c=MN(a).filter(function(d){return d.getLastSegmentEndTime}).map(function(d){return d.getLastSegmentEndTime()});0<c.length&&(c=Math.min.apply(Math,_.fh(c)),_.vD(b.presentationTimeline,c+b.za.start))},NN=function(){},JN=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],DN=["urn:mpeg:mpegB:cicp:ColourPrimaries","urn:mpeg:mpegB:cicp:MatrixCoefficients","urn:mpeg:mpegB:cicp:TransferCharacteristics"];var CM=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];GM.prototype.parse=function(a,b,c,d){b=new AM(new DataView(b));if(440786851!==EM(b).id)throw _.Oh("Not an EBML element."),new _.N(_.O,3,3008);var e=EM(b);if(408125543!==e.id)throw _.Oh("Not a Segment element."),new _.N(_.O,3,3009);b=e.a.byteOffset;e=new AM(e.a);for(var f=null;_.Jm(e.a);){var g=EM(e);if(357149030===g.id){f=g;break}}if(!f)throw _.Oh("Not an Info element."),new _.N(_.O,3,3010);f=new AM(f.a);g=1E6;for(e=null;_.Jm(f.a);){var h=EM(f);if(2807729===h.id)g=FM(h);else if(17545===h.id)if(4===
h.a.byteLength)e=h.a.getFloat32(0);else if(8===h.a.byteLength)e=h.a.getFloat64(0);else throw new _.N(_.O,3,3003);}if(null==e)throw new _.N(_.O,3,3011);f=g/1E9;e*=f;a=EM(new AM(new DataView(a)));if(475249515!==a.id)throw _.Oh("Not a Cues element."),new _.N(_.O,3,3007);return IM(a,b,f,e,c,d)};var eN=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",_.hf).set(ZL,_.Vd).set(YL,_.Td).set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95",_.Td).set("urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2",_.Rd).set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb",_.Qd),oN=(new Map).set(_.Vd,function(a){return(a=eM(a.node,"urn:microsoft","laurl"))?a.getAttribute("licenseUrl")||"":""}).set(_.Td,function(a){a=eM(a.node,VL,"pro");if(!a)return"";a=_.Aj(a.textContent);return _.Un(a).h||""}),gN=new _.K("clpp.dash.ContentProtection");_.t=qN.prototype;_.t.configure=function(a){this.a=a;this.I.a={clockSyncUri:a.clockSyncUri}};_.t.start=function(a,b){var c=this,d;return _.I(function(e){if(1==e.a)return c.j=[a],c.C=b,_.y(e,sN(c),2);d=e.f;c.C&&KN(c,d);if(!c.C)throw new _.N(_.O,7,7001);return e["return"](c.f)})};_.t.requestStop=function(){this.J=!0};_.t.stop=function(){this.a=this.C=null;this.j=[];this.f=null;this.D=[];this.G={};this.A=null;this.h=-1;this.w.stop();this.B.clear();return this.l.destroy()};
_.t.update=function(){var a=this;sN(this)["catch"](function(b){if(a.C&&b)a.C.onError(b)})};_.t.setCurrentVariant=function(){};_.t.Mb=function(){var a=this,b,c,d;return _.I(function(e){switch(e.a){case 1:return a.g.debug(_.$B),b=0,_.D(e,2),_.y(e,sN(a),4);case 4:b=e.f;_.th(e,3);break;case 2:if(c=_.E(e),a.C&&c.a&&(a.C.onError(c),d=c,d.severity===_.O))return e["return"]();case 3:if(!a.C)return e["return"]();if(!a.J){e.F(5);break}return _.y(e,a.stop(),6);case 6:return e["return"]();case 5:KN(a,b),_.B(e)}})};_.x(NN,_.Ts);NN.prototype.f=function(){_.St.mpd=qN;_.Qt[_.Wc]=qN};NN.prototype.a=function(){_.oE("mpd");_.pE(_.Wc)};NN.prototype.id=function(){return"dash"};_.J("clpp.dash.DashComponent",NN);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();