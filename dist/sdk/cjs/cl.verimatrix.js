(function(){var g={}; var _ = _ || {}
var f=function(window){var Uw="VerimatrixVCAS",Vw="clpp.verimatrix.Vcas",Ww="clpp.verimatrix.VcasComponent",bx=function(a){_.Em.call(this,Uw);var b={};b[Xw]=Xw;b[Yw]=Yw;var c=a.authenticator,d=void 0===a.licenseRequestVuidLocation?Zw:a.licenseRequestVuidLocation;b=void 0===a.httpHeaderNames?b:a.httpHeaderNames;var e=a.widevineLicenseUrl,f=a.playReadyLicenseUrl,g=a.fairPlayLicenseUrl,h=a.fairPlayCertificateUrl,l=a.fairPlaySiteId,m=void 0===a.fairPlayAssetIdStrategy?$w:a.fairPlayAssetIdStrategy;this.A=a.deviceId;this.a=c;
this.D=d;this.B=b;this.w=ax(this,e);this.o=ax(this,f);this.l=ax(this,g);this.j=h;this.H=l;this.G=m;this.g=new _.K(Vw);_.S.empty(this.w)?this.g.warn(_.tc):this.Ua(_.Vd,{licenseUrl:this.w,videoRobustness:[_.$b,void 0],audioRobustness:[_.Zb,void 0],persistentStateRequired:!1,distinctiveIdentifierRequired:!1,serverCertificate:null,modifiers:{licenseRequest:this.h.bind(this)}});_.S.empty(this.o)?this.g.warn(_.Nb):this.Ua(_.Td,{licenseUrl:this.o,videoRobustness:["3000"],audioRobustness:["2000"],modifiers:{licenseRequest:this.h.bind(this)}});
_.S.empty(this.l)?this.g.warn(_.eb):_.S.empty(this.j)?this.g.warn(_.db):this.Ua(_.Rd,{licenseUrl:this.l,certificateUrl:this.j,modifiers:{licenseRequest:this.K.bind(this),licenseResponse:this.L.bind(this),extractContentId:this.I.bind(this)}})},ax=function(a,b){if(a.D===Zw){var c=Object.assign({},{deviceId:_.zj(_.S.jd(a.A))},a.a&&{authenticator:_.zj(_.S.jd(a.a))});return b+_.vk(c)}return b},cx=function(){this.g=new _.K(Ww)};_.x(bx,_.Em);
bx.prototype.h=function(a,b){if(this.D===dx){var c=this.B[Yw],d={};d[this.B[Xw]]=this.A;this.a&&(d[c]=this.a);Object.keys(d).forEach(function(e){b.headers[e]=d[e]})}};bx.prototype.I=function(a,b){var c=_.$m(b);switch(this.G){case ex:c=_.vk({r:c,mo:this.H},!0)}return c};bx.prototype.K=function(a,b){this.h(a,b);_.cn(b)};bx.prototype.L=function(a,b){_.dn(b)};_.J(Vw,bx);bx.prototype.constructor=bx.prototype.constructor;bx.NAME=Uw;var Zw="query-string",dx="http-header";
bx.LicenseRequestVuidLocation={QUERY_STRING:Zw,HTTP_HEADER:dx};var Xw="DeviceId",Yw="Authenticator";bx.LicenseRequestHttpHeader={DEVICE_ID_HEADER:Xw,AUTHENTICATOR_HEADER:Yw};var $w="keyid",ex="contentid-siteid";bx.FairPlayAssetIdStrategy={KEYID:$w,CONTENTID_SITEID:ex};_.x(cx,_.Ts);cx.prototype.a=function(){delete _.ym.VerimatrixVCAS};cx.prototype.h=function(a){a=a.getConfiguration();if(a.drm&&a.drm.env===Uw){a=a.drm.customData;if(!a)throw new _.N(_.O,7,7100,_.Wd);a=new bx(a);this.g.info("Registering the Verimatrix VCAS Ultra environment");_.zm(a)}};cx.prototype.id=function(){return"verimatrix-vcas"};_.J(Ww,cx);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();