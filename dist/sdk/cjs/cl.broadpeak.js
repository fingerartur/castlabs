(function(){var g={}; var _ = _ || {}
var f=function(window){var SV=function(a,b){this.m=a;this.f=b;this.a=new _.Xh;this.h=!1},TV=function(a){function b(c){var d=GenericPlayerApi.call(this)||this;d.m=c;d.a=_.ak();return d}_.x(b,GenericPlayerApi);b.prototype.getPlayerName=function(){return _.wa};b.prototype.getVersion=function(){return _.ja};b.prototype.getOSName=function(){return this.a.os};b.prototype.getDeviceVersion=function(){return this.a.osVersion.name};b.prototype.getDeviceType=function(){return"browser"};b.prototype.getTotalDuration=function(){return this.m.isLive()?
0:1E3*this.m.getDuration()};b.prototype.getCurrentPosition=function(){return 1E3*this.m.getPosition()};b.prototype.getCurrentBitrate=function(){var c=this.m.getStats();return(c?c.streamBandwidth:0)/1E3};return new b(a)},UV=function(){this.l=this.f=this.a=this.h=this.m=null;this.o=new _.Xh;this.j=!1},VV=function(a,b){var c=b.analyticsAddress||null,d=b.nanoCDNHost||null,e=b.broadpeakDomainNames||"",f=b.uuid||null;a.h||(a.h=SmartLib.getInstance(),a.h.init(c,d,e),typeof f===_.mg&&a.h.setUUID(f))},WV=
function(a,b){var c=b.customParameters||{};a.a=a.h.createStreamingSession();a.a.setOption(StreamingSessionOptions.SESSION_PRECACHE,!0);for(var d in c)a.a.setCustomParameter(d,c[d]);a.o.on(a.m,_.te,a.T.bind(a));a.l=TV(a.m);a.a.attachPlayer(a.l)},XV=function(a,b){_.$h(a.o);a.f&&(a.f.release(),a.f=null);a.a&&(a.a.stopStreamingSession(b),a.a=null)},YV=function(){return!window.SmartLib||!window.GenericPlayerApi},ZV=function(){};_.t=SV.prototype;
_.t.init=function(){var a=this.m,b=this.a;b.on(a,_.jg,this.ej.bind(this));b.on(a,_.ld,this.cj.bind(this));b.on(a,"seek",this.dj.bind(this))};_.t.cj=function(a){a=a.detail;typeof a.bandwidth===_.k&&this.f.notifyLayerSwitch(a.bandwidth/1E3)};_.t.ej=function(a){var b=this.m,c=this.f;a=a.detail;var d=a.currentState;a.previousState===_.sp&&c.notifyStallEnd(!b.isPaused());switch(d){case _.sp:c.notifyStallStart();break;case _.Bp:this.h?c.notifyResume():(c.notifyFirstImage(),this.h=!0);break;case _.Ap:c.notifyPause()}};
_.t.dj=function(){var a=1E3*this.m.getPosition();this.f.notifySeek(a)};_.t.release=function(){this.a&&(_.$h(this.a),this.a=null)};_.x(UV,_.Gu);_.t=UV.prototype;_.t.onPlayerCreated=function(a){this.m=a};_.t.onContentWillLoad=function(a,b){var c=this,d=a.getConfiguration().broadpeak;if(d){if(YV())return a.onError(new _.N(1,9,11E3));this.j=!0;VV(this,d);WV(this,d);return this.a.getURL(b.url).then(function(e){if(e.isError()){var f=e.getDetailedErrorCode();e=e.getDetailedErrorMessage();c.m.onError(new _.N(1,9,11001,{bpkErrorCode:f,message:e}));XV(c,void 0)}else b.url=e.getURL(),c.f=new SV(c.m,c.l),c.f.init()})}};
_.t.onContentLoaded=function(){!1!==this.j&&this.a.precacheEnded()};_.t.T=function(a){a=a.detail;if(7003===a.code)XV(this,SmartLib.BPFormatNotSupportedError);else if(a.severity===_.O)switch(a.category){case 3:XV(this,SmartLib.BPDecodingError);break;case 1:XV(this,SmartLib.BPNetworkingError);break;case 6:XV(this,SmartLib.BPAccessRightError);break;default:XV(this,SmartLib.BPUnspecifiedError)}};_.t.onPlayerWillRelease=function(){YV()||XV(this,SmartLib.BPSessionEndsNormally);this.j=!1};_.t.id=function(){return"broadpeak"};
_.J("clpp.broadpeak.BroadpeakPlugin",UV);UV.isSdkMissing=YV;UV.Id="broadpeak";ZV.prototype.create=function(){return new UV};_.br(new ZV);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();