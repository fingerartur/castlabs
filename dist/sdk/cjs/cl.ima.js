(function(){var g={}; var _ = _ || {}
var f=function(window){var uR="clpp.ima.AdsManagerFactory",vR=function(a,b,c){this.a=a;this.f=a.getAdPodInfo();this.j=b;this.h=c},wR=function(){},xR=function(a){this.a=a},yR=function(a){this.m=a;this.A=a.getSurface().getMedia();a=this.m.getConfiguration();a=_.M.Oa(a.ima||{});this.J=_.M.pa({disableCustomPlayback:!1},a);this.o=this.m.rc("ima").Xc();this.R=this.m.rc("ima").h;this.l=this.m.rc("ima").a;this.L=new _.Lt;this.g=new _.K("clpp.ima");this.h=this.a=null;this.f=new _.Rj;this.I=!1;this.w=new _.Xh;this.V=new wR;this.B=
null;this.N=this.H=this.D=this.G=!1;this.K=this.j=null;a=this.w;var b=google.ima.AdErrorEvent.Type.AD_ERROR;a.one(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.Vl.bind(this));a.on(this.l,b,this.Ul.bind(this));a.on(this.m,_.se,this.bm.bind(this))},zR=function(a){var b=a.a,c=a.w,d=google.ima.AdEvent.Type;c.on(b,d.AD_BREAK_READY,a.Kl.bind(a));c.on(b,d.LOADED,a.Ij.bind(a));c.on(b,d.CONTENT_PAUSE_REQUESTED,a.cm.bind(a));c.on(b,d.STARTED,a.Kj.bind(a));c.on(b,d.LOG,a.Ol.bind(a));c.on(b,
d.AD_PROGRESS,a.Sl.bind(a));c.on(b,d.AD_BUFFERING,a.Ll.bind(a));c.on(b,d.FIRST_QUARTILE,a.Gj.bind(a));c.on(b,d.MIDPOINT,a.Pl.bind(a));c.on(b,d.THIRD_QUARTILE,a.Lj.bind(a));c.on(b,d.PAUSED,a.Rl.bind(a));c.on(b,d.RESUMED,a.Tl.bind(a));c.on(b,d.CLICK,a.Fj.bind(a));c.on(b,d.SKIPPED,a.Jj.bind(a));c.on(b,d.IMPRESSION,a.Hj.bind(a));c.on(b,d.COMPLETE,a.Ml.bind(a));c.on(b,d.CONTENT_RESUME_REQUESTED,a.dm.bind(a));c.on(b,d.ALL_ADS_COMPLETED,a.Xl.bind(a))},AR=function(a){a=a.J;var b=new google.ima.AdsRenderingSettings;
b.restoreCustomPlaybackStateOnAdBreakComplete=!1;typeof a.bitrate===_.k&&(b.bitrate=a.bitrate);b.enablePreloading=typeof a.enablePreloading===_.md?a.enablePreloading:!0;typeof a.loadVideoTimeout===_.k&&(b.loadVideoTimeout=a.loadVideoTimeout);Array.isArray(a.mimeTypes)&&(b.mimeTypes=a.mimeTypes);typeof a.playAdsAfterTime===_.k&&(b.playAdsAfterTime=a.playAdsAfterTime);typeof a.useStyledLinearAds===_.md&&(b.useStyledLinearAds=a.useStyledLinearAds);b.uiElements=Array.isArray(a.uiElements)?a.uiElements:
[];return b},CR=function(a){a.B=null;BR(a,_.Nc);a.o&&a.m.getSurface().hide(a.o)},DR=function(a){_.$p(a.A,{visibility:"visible"})},BR=function(a,b,c){c=c&&c.getAd();var d=null;c&&(d={ad:new vR(c,a.G,a.D)});a.m.trigger(new _.L(b,d))},ER=function(a,b){var c=b?a.V.create(b.getErrorCode()):null;a.m.onError(new _.N(1,9,10003,{errorType:c},b))},FR=function(a){return!1===a.J.disableCustomPlayback&&a.a.isCustomPlaybackUsed()&&_.Yj()},HR=function(a){var b,c;return _.I(function(d){if(1==d.a)return a.R.initialize(),
b=!!a.m.getConfiguration().muted,_.y(d,a.L.canPlay(b),2);c=d.f;if(!c&&!FR(a))return BR(a,_.kd),a.g.warn(_.oa),d["return"]();GR(a);_.B(d)})},IR=function(a,b){return _.I(function(c){if(1==c.a)return a.R.initialize(),_.y(c,b.play(),2);GR(a);_.B(c)})},GR=function(a){a.a.init(a.A.offsetWidth,a.A.offsetHeight,google.ima.ViewMode.NORMAL);a.a.start();a.I=!0},JR=function(){this.a=this.h=this.f=null},KR=function(){return!window.google||!google.ima||!google.ima.AdsLoader},LR=function(){},MR=function(){this.dd=
new _.K(uR)};_.t=vR.prototype;_.t.Cb=function(){return"Google IMA SDK"};_.t.Db=function(){return google.ima.VERSION};_.t.Jb=function(){return 0};_.t.getId=function(){return this.a.getAdId()};_.t.getCreativeId=function(){return this.a.getCreativeId()};_.t.getApiFramework=function(){return this.a.getApiFramework()};_.t.getAdSystem=function(){return this.a.getAdSystem()};_.t.getAdvertiserName=function(){return this.a.getAdvertiserName()};_.t.getTitle=function(){return this.a.getTitle()};
_.t.getDuration=function(){return this.a.getDuration()};_.t.getSkipTimeOffset=function(){return this.a.getSkipTimeOffset()};_.t.vc=function(){return this.f?this.f.getIsBumper():!1};_.t.Wb=function(){var a=null,b=this.a,c=Object.keys(b).find(function(d){return typeof b[d]===_.$e&&typeof b[d].clickThroughUrl===_.mg});c&&(a=b[c].clickThroughUrl);return a};_.t.getMediaUrl=function(){return this.a.getMediaUrl()};_.t.Gb=function(){return this.a.getVastMediaWidth()};_.t.Fb=function(){return this.a.getVastMediaHeight()};
_.t.qb=function(){return this.a.getVastMediaBitrate()};_.t.gb=function(){return this.h?2:this.j?1:0};_.t.getPodIndex=function(){return this.f?this.f.getPodIndex():0};_.t.Xb=function(){return this.f?this.f.getTimeOffset():0};_.t.Yb=function(){return this.f?this.f.getAdPosition():1};_.t.Ib=function(){return this.f?this.f.getTotalAds():1};_.t.getWrapperAdIds=function(){return this.a.getWrapperAdIds()};_.t.getWrapperAdSystems=function(){return this.a.getWrapperAdSystems()};_.t.getWrapperCreativeIds=function(){return this.a.getWrapperCreativeIds()};
vR.prototype.getWrapperCreativeIds=vR.prototype.getWrapperCreativeIds;vR.prototype.getWrapperAdSystems=vR.prototype.getWrapperAdSystems;vR.prototype.getWrapperAdIds=vR.prototype.getWrapperAdIds;vR.prototype.getSequenceLength=vR.prototype.Ib;vR.prototype.getPositionInSequence=vR.prototype.Yb;vR.prototype.getPodTimeOffset=vR.prototype.Xb;vR.prototype.getPodIndex=vR.prototype.getPodIndex;vR.prototype.getPodType=vR.prototype.gb;vR.prototype.getMediaBitrate=vR.prototype.qb;
vR.prototype.getMediaHeight=vR.prototype.Fb;vR.prototype.getMediaWidth=vR.prototype.Gb;vR.prototype.getMediaUrl=vR.prototype.getMediaUrl;vR.prototype.getClickThroughUrl=vR.prototype.Wb;vR.prototype.isBumper=vR.prototype.vc;vR.prototype.getSkipTimeOffset=vR.prototype.getSkipTimeOffset;vR.prototype.getDuration=vR.prototype.getDuration;vR.prototype.getTitle=vR.prototype.getTitle;vR.prototype.getAdvertiserName=vR.prototype.getAdvertiserName;vR.prototype.getAdSystem=vR.prototype.getAdSystem;
vR.prototype.getApiFramework=vR.prototype.getApiFramework;vR.prototype.getCreativeId=vR.prototype.getCreativeId;vR.prototype.getId=vR.prototype.getId;vR.prototype.getTechnology=vR.prototype.Jb;vR.prototype.getAdManagerVersion=vR.prototype.Db;vR.prototype.getAdManagerName=vR.prototype.Cb;wR.prototype.create=function(a){var b=google.ima.AdError.ErrorCode;switch(a){case b.VAST_LOAD_TIMEOUT:case b.VAST_MEDIA_LOAD_TIMEOUT:case b.FAILED_TO_REQUEST_ADS:return 0;case b.VIDEO_PLAY_ERROR:return 1;default:return 2}};xR.prototype.getCuePoints=function(){return this.a};xR.prototype.Zb=function(){return 0<=this.a.indexOf(0)||0===this.a.length};xR.prototype.sb=function(){return 0<=this.a.indexOf(-1)};xR.prototype.hasPostroll=xR.prototype.sb;xR.prototype.hasPreroll=xR.prototype.Zb;xR.prototype.getCuePoints=xR.prototype.getCuePoints;_.t=yR.prototype;
_.t.Vl=function(a){var b=this;this.a=a.getAdsManager(this.A,AR(this));this.a.isCustomPlaybackUsed()&&!FR(this)?(this.g.warn("IMA plugin is disabled for this platform with single video element. Disposing."),this.m.onError(new _.N(1,9,10002)),this.dispose()):(this.h=new _.Jt(this.m.getSurface(),function(c,d,e){b.a.resize(c,d,e?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),a=this.a.getCuePoints(),this.j=new xR(a),this.m.trigger(new _.L(_.Qc,{adsTimeline:this.j})),zR(this));this.f.resolve()};
_.t.Ul=function(a){ER(this,a.getError());this.f.resolve()};_.t.cm=function(a){var b=this;return _.I(function(c){switch(c.a){case 1:return b.H=!0,FR(b)?(b.K=b.m.getPosition(),_.y(c,b.m.detach(),5)):_.y(c,b.m.pause(),4);case 4:_.$p(b.A,{visibility:_.ye});c.F(3);break;case 5:var d=b.m;d.a&&d.a.stopForwardingEventsTo(d);case 3:BR(b,_.zc,a),b.h.start(),_.B(c)}})};_.t.Kl=function(){var a=this;return _.I(function(b){a.a.start();_.B(b)})};
_.t.Ij=function(a){a.getAd().isLinear()?BR(this,_.Gc,a):(this.a.discardAdBreak(),this.G||(this.G=!0,this.m.play()))};_.t.Kj=function(a){this.B=a.getAd().getDuration();BR(this,_.Mc,a);this.m.getSurface().show(this.o)};_.t.Ol=function(a){a=a.getAdData();ER(this,a?a.adError:null);CR(this)};_.t.Sl=function(a){BR(this,_.Jc,a)};_.t.Ll=function(a){BR(this,_.Bc,a)};_.t.Gj=function(a){BR(this,_.Ec,a)};_.t.Pl=function(a){BR(this,_.Hc,a)};_.t.Lj=function(a){BR(this,_.Oc,a)};_.t.Rl=function(a){BR(this,_.Ic,a)};
_.t.Tl=function(a){BR(this,_.Kc,a)};_.t.Fj=function(a){this.pause();BR(this,_.Cc,a)};_.t.Jj=function(a){BR(this,_.Lc,a);CR(this)};_.t.Hj=function(a){BR(this,_.Fc,a)};_.t.Ml=function(a){BR(this,_.Dc,a);CR(this)};
_.t.dm=function(){var a=this;return _.I(function(b){switch(b.a){case 1:a.G=!0;if(!FR(a)||null===a.K){if(!a.H)return b["return"](a.m.play());DR(a);b.F(2);break}var c=a.m;c.a&&c.a.forwardEventsTo(c);return _.y(b,_.Zq(a.m),3);case 3:if(a.D){b.F(2);break}return _.y(b,a.m.seek(a.K),2);case 2:a.H=!1;a.h&&a.h.stop();if(a.D){b.F(6);break}return _.y(b,a.m.play(),6);case 6:BR(a,_.Ac),_.B(b)}})};_.t.Xl=function(){this.N=!0};_.t.bm=function(){this.D=!0;this.l.contentComplete()};
_.t.load=function(){var a=this,b,c,d,e,f;return _.I(function(g){if(1==g.a){b=a.m;c=a.J;try{if(typeof c.adTagUrl!==_.mg)throw new _.N(1,9,10001,{missingKeys:"adTagUrl"});}catch(h){return b.onError(h),a.f.resolve(),g["return"](a.f)}return c.adTagUrl?_.y(g,a.L.canPlay(!1),2):(a.f.resolve(),g["return"](a.f))}if(3!=g.a)return d=g.f,_.y(g,a.L.canPlay(!0),3);e=g.f;f=new google.ima.AdsRequest;f.adTagUrl=c.adTagUrl;f.setAdWillAutoPlay(d);f.setAdWillPlayMuted(e);a.l.getSettings().setAutoPlayAdBreaks(!1);a.l.requestAds(f);
return g["return"](a.f)})};_.t.start=function(a){var b=this;return _.I(function(c){return b.a&&b.j&&!b.I?b.j.Zb()?_.y(c,HR(b),0):_.y(c,IR(b,a),0):_.y(c,a.play(),0)})};_.t.resume=function(){this.a&&this.a.resume()};_.t.pause=function(){this.a&&this.a.pause()};_.t.skip=function(){this.a&&this.a.skip()};_.t.getVolume=function(){return this.a?this.a.getVolume():1};_.t.setVolume=function(a){this.a&&this.a.setVolume(a)};
_.t.getPosition=function(){if(!this.a||null===this.B)return-1;var a=this.a.getRemainingTime();return 0>a?0:this.B-a};
_.t.dispose=function(){var a=this;return(new Promise(function(b){a.I&&a.j&&a.j.sb()&&!a.N?(a.w.one(a.a,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){b();a.o&&a.m.getSurface().hide(a.o)}),_.Yh(a.w,a.a,[google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.STARTED],function(){a.a&&a.a.discardAdBreak()})):b();a.a.discardAdBreak();a.l.contentComplete()})).then(function(){DR(a);a.w.release();a.h&&(a.h.stop(),a.h=null);a.a&&(a.a.destroy(),a.a=null)})};yR.prototype.getPosition=yR.prototype.getPosition;
yR.prototype.setVolume=yR.prototype.setVolume;yR.prototype.getVolume=yR.prototype.getVolume;yR.prototype.skip=yR.prototype.skip;yR.prototype.pause=yR.prototype.pause;yR.prototype.resume=yR.prototype.resume;_.x(JR,_.Gu);_.t=JR.prototype;_.t.onPlayerCreated=function(a){if(KR())return a.onError(new _.N(1,9,1E4));this.f=_.Yp(_.be,{"class":"clpp-ima clpp-hidden"});a.getSurface().addElementToContainer(this.f);this.h=new google.ima.AdDisplayContainer(this.f,a.getSurface().getMedia());this.a=new google.ima.AdsLoader(this.h);this.a.getSettings().setPlayerType(_.wa);this.a.getSettings().setPlayerVersion(_.ja);this.a.getSettings().setAutoPlayAdBreaks(!0)};
_.t.onPlayerWillDestroy=function(a){this.a&&(this.a.destroy(),this.a=null);this.h&&(this.h.destroy(),this.h=null);this.f&&(a.getSurface().removeElementFromContainer(this.f),this.f=null)};_.t.Nk=function(){return this.a};_.t.Lk=function(){return this.h};_.t.Xc=function(){return this.f};_.t.id=function(){return"ima"};_.J("clpp.ima.ImaPlugin",JR);JR.prototype.getAdContainer=JR.prototype.Xc;JR.prototype.getAdDisplayContainer=JR.prototype.Lk;JR.prototype.getAdsLoader=JR.prototype.Nk;JR.Id="ima";
JR.isSdkMissing=KR;LR.prototype.create=function(){return new JR};_.br(new LR);MR.prototype.name=function(){return uR};MR.prototype.isSupported=function(a,b){return a.namespace()===_.Hd?!1:KR()?(this.dd.warn("IMA SDK is not loaded."),!1):!(!b||!b.ima)};MR.prototype.create=function(a){return new yR(a)};MR.prototype.create=MR.prototype.create;MR.prototype.isSupported=MR.prototype.isSupported;MR.prototype.name=MR.prototype.name;_.Vp(new MR);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();