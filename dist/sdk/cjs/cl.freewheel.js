(function(){var g={}; var _ = _ || {}
var f=function(window){var iT="clpp-freewheel",jT="clpp.freewheel.AdsManagerFactory",kT="freewheel",lT=function(){this.f=this.a=null},mT=function(){},nT=function(a){switch(a){case 0:return tv.freewheel.SDK.ADUNIT_PREROLL;case 1:return tv.freewheel.SDK.ADUNIT_MIDROLL;case 2:return tv.freewheel.SDK.ADUNIT_POSTROLL;default:return""}},oT=function(a,b,c){this.h=a;this.f=b;this.a=c},pT=function(a){this.a=a},qT=function(a){this.g=new _.K("clpp.freewheel.AdsManager");this.m=a;this.h=new _.Xh;this.w=new tv.freewheel.SDK.AdManager;
this.f=this.a=null;this.B=[];this.o=[];this.A=[];this.l=new _.Rj;this.j=null},rT=function(a){var b=[];typeof a.networkId!==_.k&&b.push("networkId");typeof a.serverUrl!==_.mg&&b.push("serverUrl");typeof a.profileId!==_.mg&&b.push("profileId");typeof a.videoAssetId!==_.mg&&typeof a.videoAssetId!==_.k&&b.push("videoAssetId");if(b.length)throw new _.N(1,9,12001,{missingKeys:b.join(", ")});},sT=function(){var a,b,c,d;return _.I(function(e){if(1==e.a)return a=new _.Lt,b=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE,
_.y(e,a.canPlay(!1),2);if(3!=e.a)return c=e.f,_.y(e,a.canPlay(!0),3);d=e.f;c?b=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED:d&&(b=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED);return e["return"](b)})},vT=function(a){return _.I(function(b){if(a.B.length)return tT(a),a.f=a.B.shift(),a.f.play(),b.F(0);uT(a);return _.y(b,a.m.a.play(),0)})},wT=function(a){a.A.length?(tT(a),a.f=a.A.shift(),a.f.play()):uT(a)},tT=function(a){var b=a.m.rc(kT).Xc();b&&(a.m.getSurface().show(b),a.m.getSurface().hideMediaElement(),
a.a.registerVideoDisplayBase(iT),a.m.isMuted()?a.setVolume(0):a.setVolume(a.m.getVolume()||1))},uT=function(a){var b=a.m.rc(kT).Xc();b&&a.m.getSurface().hide(b);a.m.getSurface().showMediaElement()},xT=function(a,b,c){var d=null;a.a&&c&&(c.adInstance||c.slot)&&(c=(d=c.adInstance||null)?d.getSlot():c.slot,d={ad:new oT(a.a,c,d)});a.m.trigger(new _.L(b,d))},yT=function(){this.dd=new _.K(jT)};_.x(lT,_.Gu);_.t=lT.prototype;
_.t.onPlayerCreated=function(a){if(window.tv&&tv.freewheel&&tv.freewheel.SDK)this.a=_.Yp(_.be,{id:iT}),this.f=_.Yp(_.r,{"class":_.Ad}),this.a.appendChild(this.f),a.getSurface().addElementToContainer(this.a,!0),a.getSurface().hide(this.a);else a.onError(new _.N(1,9,12E3))};_.t.onPlayerWillDestroy=function(a){this.a&&(a.getSurface().removeElementFromContainer(this.a),this.f=this.a=null)};_.t.id=function(){return kT};_.t.Xc=function(){return this.a};_.t.Mk=function(){return this.f};
_.J("clpp.freewheel.FreeWheelPlugin",lT);lT.prototype.getAdVideo=lT.prototype.Mk;lT.prototype.getAdContainer=lT.prototype.Xc;lT.Id=kT;lT.AD_CONTAINER_ID=iT;mT.prototype.create=function(){return new lT};_.br(new mT);_.t=oT.prototype;_.t.Cb=function(){return"FreeWheel AdManager SDK"};_.t.Db=function(){return tv.freewheel.SDK.version};_.t.Jb=function(){return 0};_.t.getId=function(){return this.a?this.a.getAdId():""};_.t.getCreativeId=function(){var a=(this.a||{})._creativeId;return typeof a===_.mg?a:""};_.t.getApiFramework=function(){return this.a?this.a.getActiveCreativeRendition().getCreativeApi():""};_.t.getAdSystem=function(){return""};_.t.getAdvertiserName=function(){return""};_.t.getTitle=function(){return""};
_.t.getDuration=function(){return this.a?this.a.getActiveCreativeRendition().getDuration():0};_.t.getSkipTimeOffset=function(){return 0};_.t.vc=function(){return!1};_.t.Wb=function(){return this.a&&this.a.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]||""};_.t.getMediaUrl=function(){return this.a?this.a.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl():""};
_.t.Gb=function(){return this.a?this.a.getActiveCreativeRendition().getWidth():0};_.t.Fb=function(){return this.a?this.a.getActiveCreativeRendition().getHeight():0};_.t.qb=function(){return 0};_.t.gb=function(){switch(this.f.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:return 0;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:return 2;default:return 1}};
_.t.getPodIndex=function(){switch(this.gb()){case 0:return 0;case 2:return-1}return this.h.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL).indexOf(this.f)+1};_.t.Xb=function(){switch(this.gb()){case 0:return 0;case 2:return-1;default:return this.f.getTimePosition()}};_.t.Yb=function(){return this.a?this.f.getAdInstances().indexOf(this.a)+1:1};_.t.Ib=function(){return this.f.getAdCount()};_.t.getWrapperAdIds=function(){return[]};_.t.getWrapperAdSystems=function(){return[]};
_.t.getWrapperCreativeIds=function(){return[]};oT.prototype.getWrapperCreativeIds=oT.prototype.getWrapperCreativeIds;oT.prototype.getWrapperAdSystems=oT.prototype.getWrapperAdSystems;oT.prototype.getWrapperAdIds=oT.prototype.getWrapperAdIds;oT.prototype.getSequenceLength=oT.prototype.Ib;oT.prototype.getPositionInSequence=oT.prototype.Yb;oT.prototype.getPodTimeOffset=oT.prototype.Xb;oT.prototype.getPodIndex=oT.prototype.getPodIndex;oT.prototype.getPodType=oT.prototype.gb;
oT.prototype.getMediaBitrate=oT.prototype.qb;oT.prototype.getMediaHeight=oT.prototype.Fb;oT.prototype.getMediaWidth=oT.prototype.Gb;oT.prototype.getMediaUrl=oT.prototype.getMediaUrl;oT.prototype.getClickThroughUrl=oT.prototype.Wb;oT.prototype.isBumper=oT.prototype.vc;oT.prototype.getSkipTimeOffset=oT.prototype.getSkipTimeOffset;oT.prototype.getDuration=oT.prototype.getDuration;oT.prototype.getTitle=oT.prototype.getTitle;oT.prototype.getAdvertiserName=oT.prototype.getAdvertiserName;
oT.prototype.getAdSystem=oT.prototype.getAdSystem;oT.prototype.getApiFramework=oT.prototype.getApiFramework;oT.prototype.getCreativeId=oT.prototype.getCreativeId;oT.prototype.getId=oT.prototype.getId;oT.prototype.getTechnology=oT.prototype.Jb;oT.prototype.getAdManagerVersion=oT.prototype.Db;oT.prototype.getAdManagerName=oT.prototype.Cb;pT.prototype.getCuePoints=function(){return this.a.getTemporalSlots().map(function(a){switch(a.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:return 0;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:return-1;default:return a.getTimePosition()}})};pT.prototype.Zb=function(){return 0<this.a.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL).length};pT.prototype.sb=function(){return 0<this.a.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL).length};
pT.prototype.hasPostroll=pT.prototype.sb;pT.prototype.hasPreroll=pT.prototype.Zb;pT.prototype.getCuePoints=pT.prototype.getCuePoints;_.t=qT.prototype;
_.t.load=function(){var a=this,b,c,d,e,f,g,h,l;return _.I(function(m){if(1==m.a){b=a.m.getConfiguration().freewheel||{};try{rT(b)}catch(n){return a.m.onError(n),a.l.resolve(),m["return"](a.l)}a.w.setNetwork(b.networkId);a.w.setServer(b.serverUrl);a.a=a.w.newContext();a.a.setProfile(b.profileId);typeof b.siteSectionId!==_.mg&&typeof b.siteSectionId!==_.k||a.a.setSiteSection(b.siteSectionId);return _.y(m,sT(),2)}c=m.f;a.a.setVideoAsset(b.videoAssetId,a.m.getDuration(),void 0,void 0,c);if(Array.isArray(b.pods))for(d=
_.w(b.pods),e=d.next();!e.done;e=d.next())f=e.value,a.a.addTemporalSlot(f.id,nT(f.type),f.position,f.slotProfile,f.cuepointSequence,f.maxDuration,f.minDuration,f.acceptContentType);b.keyValues&&typeof b.keyValues===_.$e&&Object.keys(b.keyValues).forEach(function(n){return a.a.addKeyValue(n,b.keyValues[n])});a.a.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);if(Array.isArray(b.parameters))for(g=_.w(b.parameters),h=g.next();!h.done;h=
g.next())l=h.value,a.a.setParameter(l.name,l.value,l.level);a.h.on(a.a,tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,a.tm.bind(a));a.h.on(a.a,tv.freewheel.SDK.EVENT_SLOT_STARTED,a.xm.bind(a));a.h.on(a.a,tv.freewheel.SDK.EVENT_SLOT_ENDED,a.wm.bind(a));a.h.on(a.a,tv.freewheel.SDK.EVENT_AD,a.Nl.bind(a));a.h.on(a.m,_.ug,a.Dj.bind(a));a.h.on(a.m,_.jg,a.Cj.bind(a));a.a.submitRequest();return m["return"](a.l)})};_.t.start=function(){var a=this;return _.I(function(b){return _.y(b,vT(a),0)})};
_.t.resume=function(){this.f&&this.f.resume()};_.t.pause=function(){this.f&&this.f.pause()};_.t.skip=function(){this.f&&this.f.skipCurrentAd()};_.t.getVolume=function(){return this.a?this.a.getAdVolume():1};_.t.setVolume=function(a){this.a&&this.a.setAdVolume(a)};_.t.getPosition=function(){return this.f?this.f.getPlayheadTime():-1};_.t.dispose=function(){var a=this;return _.I(function(b){a.h.release();a.j&&(a.j.stop(),a.j=null);uT(a);a.a&&(a.a.dispose(),a.a=null);_.B(b)})};
_.t.tm=function(a){var b=this;if(a.success)this.B=this.a.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL),this.o=this.a.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL),this.A=this.a.getSlotsByTimePositionClass(tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL),this.m.trigger(new _.L(_.Qc,{adsTimeline:new pT(this.a)})),this.j=new _.Jt(this.m.getSurface(),function(c,d){return b.a.resize(c,d)},this.m.rc(kT).f);else this.m.onError(new _.N(1,9,10003,{errorType:0},
void 0));this.l.resolve()};_.t.xm=function(a){xT(this,_.zc,a);this.j.start()};_.t.wm=function(a){this.f=null;a=a.slot;xT(this,_.Ac);this.j.stop();if(a)switch(a.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:vT(this);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:uT(this);this.m.play();break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:wT(this)}};
_.t.Nl=function(a){var b=a.subType;this.g.debug("ad event",b);switch(b){case tv.freewheel.SDK.EVENT_AD_IMPRESSION:xT(this,_.Mc,a);xT(this,_.Fc,a);break;case tv.freewheel.SDK.EVENT_AD_IMPRESSION_END:xT(this,_.Nc,a);break;case tv.freewheel.SDK.EVENT_AD_FIRST_QUARTILE:xT(this,_.Ec,a);break;case tv.freewheel.SDK.EVENT_AD_MIDPOINT:xT(this,_.Hc,a);break;case tv.freewheel.SDK.EVENT_AD_THIRD_QUARTILE:xT(this,_.Oc,a);break;case tv.freewheel.SDK.EVENT_AD_COMPLETE:xT(this,_.Dc,a);break;case tv.freewheel.SDK.EVENT_AD_CLICK:xT(this,
_.Cc,a);break;case tv.freewheel.SDK.EVENT_AD_PAUSE:xT(this,_.Ic,a);break;case tv.freewheel.SDK.EVENT_AD_RESUME:xT(this,_.Kc,a);break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:xT(this,_.Lc,a);break;case tv.freewheel.SDK.EVENT_AD_BUFFERING_START:xT(this,_.Bc,a);break;case tv.freewheel.SDK.EVENT_AD_BUFFERING_END:xT(this,_.Jc,a);break;case tv.freewheel.SDK.EVENT_ERROR:this.m.onError(new _.N(1,9,10003,{errorType:1},{fwCode:a[tv.freewheel.SDK.INFO_KEY_ERROR_CODE],fwInfo:a[tv.freewheel.SDK.INFO_KEY_ERROR_INFO],
fwModule:a[tv.freewheel.SDK.INFO_KEY_ERROR_MODULE]}))}};_.t.Dj=function(){var a=this;if(!this.f){var b=this.m.getPosition();if(this.f=this.o.find(function(d){return.5>Math.abs(b-d.getTimePosition())})||null){var c=this.o.findIndex(function(d){return d===a.f});this.o.splice(c,1);this.m.pause();tT(this);this.f.play()}}};
_.t.Cj=function(a){if((a=a.detail)&&this.a)switch(a.currentState){case _.Bp:this.a.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING);break;case _.Ap:this.a.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PAUSED);break;case _.up:this.a.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED);wT(this);break;case _.np:case _.yp:this.a.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED)}};qT.prototype.getPosition=qT.prototype.getPosition;qT.prototype.setVolume=qT.prototype.setVolume;
qT.prototype.getVolume=qT.prototype.getVolume;qT.prototype.skip=qT.prototype.skip;qT.prototype.pause=qT.prototype.pause;qT.prototype.resume=qT.prototype.resume;qT.prototype.start=qT.prototype.start;yT.prototype.name=function(){return jT};yT.prototype.isSupported=function(a,b){return a.namespace()===_.Hd?!1:window.tv&&tv.freewheel&&tv.freewheel.SDK?!(!b||!b.freewheel):(this.dd.warn("FreeWheel SDK is not loaded."),!1)};yT.prototype.create=function(a){return new qT(a)};yT.prototype.create=yT.prototype.create;yT.prototype.isSupported=yT.prototype.isSupported;yT.prototype.name=yT.prototype.name;_.Vp(new yT);};
if(typeof(module)!="undefined"&&module.exports){var x=require("./cl.core.js");_ = x._;(f.call(g,this));module.exports=g;}
else if (typeof(define)!="undefined"&&define.amd) {define(["./cl.core"], function(c){_=c._;(f.call(g,this));return g;});}
else{_=this.clpp._;(f.call(g,this));}
})();